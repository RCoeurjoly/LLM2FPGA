* 1c-selected_route
* What is the monkey in this project?
As in monkey reciting Shakespeare on top of a pedestal.

1: Can we translate/lower an LLM to something that can target an FPGA?
There seems to be a path with Torch-MLIR + CIRCT

2: Can the smallest LLM fit into the biggest open source FPGA?

The biggest open source FPGA has been identified: XC7K480T K7-480 Kintex7
The smallest LLM also: tiny stories

The test would be to do 1 first with tiny stories, then use open source tooling (nextpnr xilinx) to see if it fits.
** https://hanchenye.com/streamtensor/

https://hanchenye.com/streamtensor/
* DONE 1b-compatibility_check
CLOSED: [2025-12-03 Wed 21:05]
- State "DONE"       from "TODO_NEXT"  [2025-12-03 Wed 21:05]
- State "TODO_NEXT"  from              [2025-11-03 Mon 12:02]
** DONE Table comparison of results
CLOSED: [2025-12-03 Wed 21:05]
- State "DONE"       from "TODO_NEXT"  [2025-12-03 Wed 21:05]
- State "TODO_NEXT"  from              [2025-11-30 Sun 17:32]
** DONE Add MLIR + CIRCT to survey table
CLOSED: [2025-11-30 Sun 17:40]
- State "DONE"       from              [2025-11-30 Sun 17:40]
** DONE First draft
CLOSED: [2025-11-30 Sun 17:32]
- State "DONE"       from "TODO_NEXT"  [2025-11-30 Sun 17:32]
- State "TODO_NEXT"  from              [2025-11-03 Mon 16:50]
*** DONE Torch-MLIR + CIRCT
CLOSED: [2025-11-30 Sun 17:32]
- State "DONE"       from "TODO_NEXT"  [2025-11-30 Sun 17:32]
- State "TODO_NEXT"  from              [2025-11-23 Sun 15:07]
**** Miminal PyTorch: demo of PyTorch + Torch-MLIR + MLIR + CIRCT + Yosys
https://github.com/RCoeurjoly/hot-chips-2022-pytorch-circt-hls-demo

  nix shell "github:NixOS/nixpkgs/ee09932cedcef15aaf476f9343d1dea2cb77e261#llvmPackages_21.mlir" -c ./my-demo.sh 
**** CANCELED Fix CIRCT
CLOSED: [2025-11-25 Tue 13:02]
- State "CANCELED"   from              [2025-11-25 Tue 13:02]
build failed
nix log /nix/store/vkv5q65dmpf7n4xza3kinzgbpalzglwf-circt-1.137.0g20251124_2eb32a1.drv

**** DONE Prompt for debugging
CLOSED: [2025-11-25 Tue 13:02]
- State "DONE"       from "CANCELED"   [2025-11-25 Tue 13:02]
- State "CANCELED"   from              [2025-11-25 Tue 13:02]
My goal is to get Verilog or SystemVerilog out of PyTorch + Torch-MLIR + MLIR + CIRCT

Attached relevant files.

This is the error I am currently getting:

How to fix?

**** DONE my-dot-handshake.mlir:2:3: error: 'handshake.func' op expected that block argument #2 is used by an 'extmemory' operation
CLOSED: [2025-11-24 Mon 18:34]
- State "DONE"       from "TODO_NEXT"  [2025-11-24 Mon 18:34]
- State "TODO_NEXT"  from              [2025-11-24 Mon 18:18]
  handshake.func @main(%arg0: memref<16xi32>, %arg1: memref<16xi32>, %arg2: memref<16xi32>, %arg3: none, ...) -> none attributes {argNames = ["in0", "in1", "in2", "in3"], resNames = ["out0"]} {
  ^
***** Things tried
****** Added --memref-expand and  --buffer-deallocation-pipeline \ to step 3
echo "### 3) Linalg → CF (CIRCT-compatible bufferization)"
$MLIR_OPT my-dot-linalg.mlir \
  --empty-tensor-to-alloc-tensor \
  --one-shot-bufferize="bufferize-function-boundaries" \
  --buffer-deallocation-pipeline \
  --buffer-results-to-out-params \
  --memref-expand \
  --convert-linalg-to-affine-loops \
  --lower-affine \
  --convert-scf-to-cf \

  Same error
****** removing --buffer-results-to-out-params, I get different errors
### 4) CF → Handshake ### 5) Handshake → HW my-dot-handshake.mlir:121:14: error: unsupported data type ''memref<16xi32>'' %alloc = memref.alloc() : memref<16xi32> ^ my-dot-handshake.mlir:121:14: error: unsupported data type ''memref<16xi32>'' %alloc = memref.alloc() : memref<16xi32> ^ my-dot-handshake.mlir:121:14: error: unsupported data type ''memref<16xi32>'' %alloc = memref.alloc() : memref<16xi32> ^ my-dot-handshake.mlir:121:14: error: unsupported data type ''memref<16xi32>'' %alloc = memref.alloc() : memref<16xi32> ^ my-dot-handshake.mlir:121:14: error: unsupported type for zero value: 'memref<16xi32>' %alloc = memref.alloc() : memref<16xi32> ^ circt-opt: /build/source/lib/Conversion/HandshakeToHW/HandshakeToHW.cpp:711: {anonymous}::createZeroDataConst(RTLBuilder&, mlir::Location, mlir::Type)::<lambda(mlir::Type)>: Assertion false' failed. PLEASE submit a bug report to https://github.com/llvm/circt and include the crash backtrace. Stack dump: 0. Program arguments: /home/roland/circt-nix/result/bin/circt-opt my-dot-handshake.mlir -handshake-lower-extmem-to-hw -handshake-materialize-forks-sinks -handshake-insert-buffers=strategy=all -lower-handshake-to-hw -canonicalize #0 0x000055816d0f208b llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) (/home/roland/circt-nix/result/bin/circt-opt+0x11f408b) #1 0x000055816d0eecba SignalHandler(int, siginfo_t*, void*) (/home/roland/circt-nix/result/bin/circt-opt+0x11f0cba) #2 0x00007f64bb3479c0 __restore_rt (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x419c0) #3 0x00007f64bb3a2aac __pthread_kill_implementation (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x9caac) #4 0x00007f64bb34790e gsignal (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x4190e) #5 0x00007f64bb32e942 abort (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x28942) #6 0x00007f64bb32e85e _nl_load_domain.cold (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x2885e) #7 0x00007f64bb33f6f7 (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x396f7) #8 0x000055816eac2fc2 (anonymous namespace)::createZeroDataConst((anonymous namespace)::RTLBuilder&, mlir::Location, mlir::Type) (/home/roland/circt-nix/result/bin/circt-opt+0x2bc4fc2) #9 0x000055816eac52b7 (anonymous namespace)::BufferConversionPattern::buildModule(circt::handshake::BufferOp, circt::BackedgeBuilder&, (anonymous namespace)::RTLBuilder&, circt::hw::HWModulePortAccessor&) const (/home/roland/circt-nix/result/bin/circt-opt+0x2bc72b7) #10 0x000055816eac7068 (anonymous namespace)::HandshakeConversionPattern<circt::handshake::BufferOp>::matchAndRewrite(circt::handshake::BufferOp, circt::handshake::BufferOpAdaptor, mlir::ConversionPatternRewriter&) const::'lambda'(mlir::OpBuilder&, circt::hw::HWModulePortAccessor&)::operator()(mlir::OpBuilder&, circt::hw::HWModulePortAccessor&) const (/home/roland/circt-nix/result/bin/circt-opt+0x2bc9068) #11 0x000055816ddf8769 circt::hw::HWModuleOp::build(mlir::OpBuilder&, mlir::OperationState&, mlir::StringAttr, circt::hw::ModulePortInfo const&, llvm::function_ref<void (mlir::OpBuilder&, circt::hw::HWModulePortAccessor&)>, mlir::ArrayAttr, llvm::ArrayRef<mlir::NamedAttribute>, mlir::StringAttr) (/home/roland/circt-nix/result/bin/circt-opt+0x1efa769) #12 0x000055816ddf8aa2 circt::hw::HWModuleOp::create(mlir::OpBuilder&, mlir::Location, mlir::StringAttr, circt::hw::ModulePortInfo const&, llvm::function_ref<void (mlir::OpBuilder&, circt::hw::HWModulePortAccessor&)>, mlir::ArrayAttr, llvm::ArrayRef<mlir::NamedAttribute>, mlir::StringAttr) (/home/roland/circt-nix/result/bin/circt-opt+0x1efaaa2) #13 0x000055816eadd1f4 (anonymous namespace)::HandshakeConversionPattern<circt::handshake::BufferOp>::matchAndRewrite(circt::handshake::BufferOp, circt::handshake::BufferOpAdaptor, mlir::ConversionPatternRewriter&) const (/home/roland/circt-nix/result/bin/circt-opt+0x2bdf1f4) #14 0x000055816eaa2938 llvm::LogicalResult mlir::ConversionPattern::dispatchTo1To1<mlir::OpConversionPattern<circt::handshake::BufferOp>, circt::handshake::BufferOp>(mlir::OpConversionPattern<circt::handshake::BufferOp> const&, circt::handshake::BufferOp, circt::handshake::BufferOp::GenericAdaptor<llvm::ArrayRef<mlir::ValueRange> >, mlir::ConversionPatternRewriter&) (/home/roland/circt-nix/result/bin/circt-opt+0x2ba4938) #15 0x000055816eaa2a7d mlir::OpConversionPattern<circt::handshake::BufferOp>::matchAndRewrite(mlir::Operation*, llvm::ArrayRef<mlir::ValueRange>, mlir::ConversionPatternRewriter&) const (/home/roland/circt-nix/result/bin/circt-opt+0x2ba4a7d) #16 0x000055816fc18bfe mlir::ConversionPattern::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&) const (/home/roland/circt-nix/result/bin/circt-opt+0x3d1abfe) #17 0x000055816fc6f50c mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>)::'lambda'()::operator()() const (/home/roland/circt-nix/result/bin/circt-opt+0x3d7150c) #18 0x000055816fc70af1 mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>) (/home/roland/circt-nix/result/bin/circt-opt+0x3d72af1) #19 0x000055816fc1eb5e (anonymous namespace)::OperationLegalizer::legalize(mlir::Operation*) (/home/roland/circt-nix/result/bin/circt-opt+0x3d20b5e) #20 0x000055816fc20413 mlir::OperationConverter::convert(mlir::Operation*, bool) (/home/roland/circt-nix/result/bin/circt-opt+0x3d22413) #21 0x000055816fc208aa mlir::OperationConverter::convertOperations(llvm::ArrayRef<mlir::Operation*>) (/home/roland/circt-nix/result/bin/circt-opt+0x3d228aa) #22 0x000055816fc29854 applyConversion(llvm::ArrayRef<mlir::Operation*>, mlir::ConversionTarget const&, mlir::FrozenRewritePatternSet const&, mlir::ConversionConfig, (anonymous namespace)::OpConversionMode) (/home/roland/circt-nix/result/bin/circt-opt+0x3d2b854) #23 0x000055816fc299ff mlir::applyPartialConversion(mlir::Operation*, mlir::ConversionTarget const&, mlir::FrozenRewritePatternSet const&, mlir::ConversionConfig) (/home/roland/circt-nix/result/bin/circt-opt+0x3d2b9ff) #24 0x000055816eae49a0 (anonymous namespace)::HandshakeToHWPass::runOnOperation() (/home/roland/circt-nix/result/bin/circt-opt+0x2be69a0) #25 0x000055816fdb5948 mlir::detail::OpToOpPassAdaptor::run(mlir::Pass*, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int) (/home/roland/circt-nix/result/bin/circt-opt+0x3eb7948) #26 0x000055816fdb5efb mlir::detail::OpToOpPassAdaptor::runPipeline(mlir::OpPassManager&, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int, mlir::PassInstrumentor*, mlir::PassInstrumentation::PipelineParentInfo const*) (/home/roland/circt-nix/result/bin/circt-opt+0x3eb7efb) #27 0x000055816fdb66bd mlir::PassManager::runPasses(mlir::Operation*, mlir::AnalysisManager) (/home/roland/circt-nix/result/bin/circt-opt+0x3eb86bd) #28 0x000055816fdb7ab5 mlir::PassManager::run(mlir::Operation*) (/home/roland/circt-nix/result/bin/circt-opt+0x3eb9ab5) #29 0x000055816f47c3cd performActions(llvm::raw_ostream&, std::shared_ptr<llvm::SourceMgr> const&, mlir::MLIRContext*, mlir::MlirOptMainConfig const&) (/home/roland/circt-nix/result/bin/circt-opt+0x357e3cd) #30 0x000055816f47d42c llvm::LogicalResult llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, llvm::MemoryBufferRef const&, llvm::raw_ostream&)>::callback_fn<mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&)::'lambda'(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, llvm::MemoryBufferRef, llvm::raw_ostream&)>(long, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, llvm::MemoryBufferRef const&, llvm::raw_ostream&) (/home/roland/circt-nix/result/bin/circt-opt+0x357f42c) #31 0x000055816f4b6585 mlir::splitAndProcessBuffer(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, llvm::MemoryBufferRef const&, llvm::raw_ostream&)>, llvm::raw_ostream&, llvm::StringRef, llvm::StringRef) (/home/roland/circt-nix/result/bin/circt-opt+0x35b8585) #32 0x000055816f474891 mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&) (.part.0) (/home/roland/circt-nix/result/bin/circt-opt+0x3576891) #33 0x000055816f47db04 mlir::MlirOptMain(int, char**, llvm::StringRef, llvm::StringRef, mlir::DialectRegistry&) (/home/roland/circt-nix/result/bin/circt-opt+0x357fb04) #34 0x000055816f47dd55 mlir::MlirOptMain(int, char**, llvm::StringRef, mlir::DialectRegistry&) (/home/roland/circt-nix/result/bin/circt-opt+0x357fd55) #35 0x000055816d044c1c main (/home/roland/circt-nix/result/bin/circt-opt+0x1146c1c) #36 0x00007f64bb3304d8 __libc_start_call_main (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x2a4d8) #37 0x00007f64bb33059b __libc_start_main@GLIBC_2.2.5 (/nix/store/daamdpmaz2vjvna55ccrc30qw3qb8h6d-glibc-2.40-66/lib/libc.so.6+0x2a59b) #38 0x000055816d049aa5 _start (/home/roland/circt-nix/result/bin/circt-opt+0x114baa5) ./demo2.sh: line 64: 271770 Aborted (core dumped) $CIRCT_OPT my-dot-handshake.mlir -handshake-lower-extmem-to-hw -handshake-materialize-forks-sinks -handshake-insert-buffers="strategy=all" -lower-handshake-to-hw -canonicalize > my-dot-hw.mlir
******* removing -handshake-insert-buffers="strategy=all", I get
### 5) Handshake → HW
my-dot-handshake.mlir:2:3: error: 'hw.output' op output types must match module. In operand 0, expected '!esi.channel<memref<16xi32>>', but got 'memref<16xi32>'.
  handshake.func @main(%arg0: memref<16xi32>, %arg1: memref<16xi32>, %arg2: none, ...) -> (memref<16xi32>, none) attributes {argNames = ["in0", "in1", "in2"], resNames = ["out0", "out1"]} {
  ^
my-dot-handshake.mlir:2:3: note: see current operation: "hw.output"(%164, %184#1, %9, %6) : (memref<16xi32>, !esi.channel<i0>, !esi.channel<i4>, !esi.channel<i4>) -> ()
**** CANCELED my-dot-cf.mlir:2:19: error: memref's must be both statically sized and unidimensional.
CLOSED: [2025-11-24 Mon 18:18]
- State "CANCELED"   from "TODO_NEXT"  [2025-11-24 Mon 18:18]
- State "TODO_NEXT"  from              [2025-11-24 Mon 16:14]
  func.func @main(%arg0: memref<4x4xi32, strided<[?, ?], offset: ?>>, %arg1: memref<4x4xi32, strided<[?, ?], offset: ?>>, %arg2: memref<4x4xi32>) {
                  ^
*** DONE LoopLynx: https://github.com/zjnyly/LoopLynx?tab=readme-ov-file
CLOSED: [2025-11-30 Sun 17:32]
- State "DONE"       from "TODO_NEXT"  [2025-11-30 Sun 17:32]
- State "TODO_NEXT"  from              [2025-11-03 Mon 12:06]
  They point to https://github.com/zjnyly/TeraFly?tab=readme-ov-file

  Which in turn point to llama fpga
  https://github.com/adamgallas/llama-fpga
**** llama fpga
my board: Kintex7 480T
Placa de desarrollo FPGA XC7K480T K7-480 Kintex7 PCIE X8 4G YZCA-00338 #T5-

https://www.ebay.es/itm/376208176272?chn=ps&norover=1&mkevt=1&mkrid=1185-171098-620544-2&mkcid=2&mkscid=101&itemid=376208176272&targetid=4587643557342507&device=c&mktype=&googleloc=164580&poi=&campaignid=604142975&mkgroupid=1344705146320125&rlsatarget=pla-4587643557342507&abcId=9410770&merchantid=137185&msclkid=02f7bf9a60b216d587b9d7c5748b647d
**** TeraFly: https://github.com/zjnyly/TeraFly
multi-node FPGA architecture? I want only one FPGA
*** DONE HLSTransform: https://github.com/HLSTransform/submission
CLOSED: [2025-11-30 Sun 17:32]
- State "DONE"       from "TODO_NEXT"  [2025-11-30 Sun 17:32]
- State "TODO_NEXT"  from              [2025-11-03 Mon 12:06]
2 years old?
*** DONE cornell-zhang/allo
CLOSED: [2025-11-30 Sun 17:32]
- State "DONE"       from "TODO_NEXT"  [2025-11-30 Sun 17:32]
- State "TODO_NEXT"  from              [2025-11-03 Mon 12:07]
*** DONE Richielee630/TMMA
CLOSED: [2025-11-03 Mon 16:50]
- State "DONE"       from "WAIT"       [2025-11-03 Mon 16:50]
- State "WAIT"       from "TODO_NEXT"  [2025-11-03 Mon 16:50]
- State "TODO_NEXT"  from              [2025-11-03 Mon 12:06]
*** DONE Mase
CLOSED: [2025-11-03 Mon 12:05]
- State "DONE"       from              [2025-11-03 Mon 12:05]
**** DONE Deepwok / MASE — elaboration attempt + blockage
  CLOSED: [2025-11-03 Mon 12:02] SCHEDULED: <2025-10-08 Wed 16:14>
  :PROPERTIES:
  :Repo:     RCoeurjoly/mase (branch: RCoeurjoly/flake)
  :Tooling:  nix, python venv, yosys 0.45+126, yosys-slang plugin
  :Top:      top
  :Result:   BLOCKED (missing generated modules)
  :END:

  - State "DONE"       from "TODO_NEXT"  [2025-11-03 Mon 12:02]
***** Steps run
#+begin_src bash
git clone git@github.com:RCoeurjoly/mase.git
cd mase
git checkout RCoeurjoly/flake

# Dev env (works, not fully polished)
nix develop
source .venv/bin/activate

# Generate RTL via MASE helper
python LLM2FPGA.py

# Check outputs
ls ~/.mase

# Build yosys-slang (per its README), ensure yosys in PATH
cd ~/yosys-slang

# Elaborate with slang (SystemVerilog)
yosys -m build/slang.so -p \
  "read_slang \
     /home/roland/mase/src/mase_components/memory/rtl/fifo.sv \
     /home/roland/mase/src/mase_components/common/rtl/mux.sv \
     /home/roland/.mase/top/hardware/rtl/*.sv \
     /home/roland/mase/src/mase_components/common/rtl/single_element_repeat.sv \
     /home/roland/mase/src/mase_components/common/rtl/unpacked_register_slice.sv \
     /home/roland/mase/src/mase_components/cast/rtl/fixed_rounding.sv \
     /home/roland/mase/src/mase_components/memory/rtl/input_buffer.sv \
     /home/roland/mase/src/mase_components/memory/rtl/unpacked_skid_buffer.sv \
     /home/roland/mase/src/mase_components/cast/rtl/fixed_round.sv \
     /home/roland/mase/src/mase_components/cast/rtl/fixed_signed_cast.sv \
     /home/roland/mase/src/mase_components/cast/rtl/signed_clamp.sv \
     /home/roland/mase/src/mase_components/cast/rtl/floor_round.sv \
     /home/roland/mase/src/mase_components/memory/rtl/blk_mem_gen_0.sv \
     /home/roland/mase/src/mase_components/memory/rtl/simple_dual_port_ram.sv \
     --top top"
#+end_src

***** Output
 /----------------------------------------------------------------------------\
 |  yosys -- Yosys Open SYnthesis Suite                                       |
 |  Copyright (C) 2012 - 2024  Claire Xenia Wolf <claire@yosyshq.com>         |
 |  Distributed under an ISC-like license, type "license" to see terms        |
 \----------------------------------------------------------------------------/
 Yosys 0.45+126 (git sha1 80119386c, g++ 11.4.0-1ubuntu1~22.04 -Og -fPIC)

-- Running command `read_slang /home/roland/mase/src/mase_components/memory/rtl/fifo.sv /home/roland/mase/src/mase_components/common/rtl/mux.sv /home/roland/.mase/top/hardware/rtl/*.sv /home/roland/mase/src/mase_components/common/rtl/single_element_repeat.sv /home/roland/mase/src/mase_components/common/rtl/unpacked_register_slice.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_rounding.sv /home/roland/mase/src/mase_components/memory/rtl/input_buffer.sv /home/roland/mase/src/mase_components/memory/rtl/unpacked_skid_buffer.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_round.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_signed_cast.sv /home/roland/mase/src/mase_components/cast/rtl/signed_clamp.sv /home/roland/mase/src/mase_components/cast/rtl/floor_round.sv /home/roland/mase/src/mase_components/memory/rtl/blk_mem_gen_0.sv /home/roland/mase/src/mase_components/memory/rtl/simple_dual_port_ram.sv --top top' --

1. Executing SLANG frontend.
Top level design units:
    top

../.mase/top/hardware/rtl/top.sv:182:1: error: unknown module 'net_0_bias_source'
net_0_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:264:1: error: unknown module 'net_2_weight_source'
net_2_weight_source #(
^~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:278:1: error: unknown module 'net_2_bias_source'
net_2_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:43:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:45:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:84:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_TOTAL_DIM0 must equal B_TOTAL_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:86:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_COMPUTE_DIM0 must equal B_COMPUTE_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:90:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:92:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:94:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:96:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:64:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:66:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_FRAC_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_FRAC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Build failed: 3 errors, 10 warnings
ERROR: Compilation failed

***** Output (summary)
- Yosys: 0.45+126 (80119386c)
- Frontend: slang (SystemVerilog)
- Errors (3): unknown module instances required by top:
  - net_0_bias_source
  - net_2_weight_source
  - net_2_bias_source
- Warnings (10): `$fatal` form (“finish argument must be 0/1/2”) — non-blocking for 1b.

***** Diagnosis
- 'top.sv' instantiates per-net source wrappers for weights/biases.
- Only 'net_0_weight_source.sv' is present under `~/.mase`:
  - Evidence: '~/.mase/top/hardware/rtl/net_0_weight_source.sv'
- The corresponding bias/weight source modules were *not generated* by LLM2FPGA.py in this run, so elaboration halts at hierarchy resolution.
**** DONE Write the steps for deepwok mase
CLOSED: [2025-11-03 Mon 12:02]
- State "DONE"       from "TODO_NEXT"  [2025-11-03 Mon 12:02]
- State "TODO_NEXT"  from              [2025-10-08 Wed 16:14]
We have created a fork of mase, with a branch called RCoeurjoly/flake.

git clone git@github.com:RCoeurjoly/mase.git
cd mase
git checkout RCoeurjoly/flake

# Enter the environment, not completely pulished but it works
nix develop
source .venv/bin/activate

# Execute custom script called LLM2FPGA.py, making use of mase library
python LLM2FPGA.py

# We check that systemverilog files have been generated to ~/.mase
ls ~/.mase
# Build yosys-slang following its README instructions: https://github.com/povik/yosys-slang?tab=readme-ov-file#building
cd ~/yosys-slang
# Now we process the mase generated RTL files
# yosys has to be in PATH,
yosys -m build/slang.so -p "read_slang /home/roland/mase/src/mase_components/memory/rtl/fifo.sv /home/roland/mase/src/mase_components/common/rtl/mux.sv /home/roland/.mase/top/hardware/rtl/*.sv /home/roland/mase/src/mase_components/common/rtl/single_element_repeat.sv /home/roland/mase/src/mase_components/common/rtl/unpacked_register_slice.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_rounding.sv /home/roland/mase/src/mase_components/memory/rtl/input_buffer.sv /home/roland/mase/src/mase_components/memory/rtl/unpacked_skid_buffer.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_round.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_signed_cast.sv /home/roland/mase/src/mase_components/cast/rtl/signed_clamp.sv /home/roland/mase/src/mase_components/cast/rtl/floor_round.sv /home/roland/mase/src/mase_components/memory/rtl/blk_mem_gen_0.sv /home/roland/mase/src/mase_components/memory/rtl/simple_dual_port_ram.sv --top top"


 /----------------------------------------------------------------------------\
 |  yosys -- Yosys Open SYnthesis Suite                                       |
 |  Copyright (C) 2012 - 2024  Claire Xenia Wolf <claire@yosyshq.com>         |
 |  Distributed under an ISC-like license, type "license" to see terms        |
 \----------------------------------------------------------------------------/
 Yosys 0.45+126 (git sha1 80119386c, g++ 11.4.0-1ubuntu1~22.04 -Og -fPIC)

-- Running command `read_slang /home/roland/mase/src/mase_components/memory/rtl/fifo.sv /home/roland/mase/src/mase_components/common/rtl/mux.sv /home/roland/.mase/top/hardware/rtl/*.sv /home/roland/mase/src/mase_components/common/rtl/single_element_repeat.sv /home/roland/mase/src/mase_components/common/rtl/unpacked_register_slice.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_rounding.sv /home/roland/mase/src/mase_components/memory/rtl/input_buffer.sv /home/roland/mase/src/mase_components/memory/rtl/unpacked_skid_buffer.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_round.sv /home/roland/mase/src/mase_components/cast/rtl/fixed_signed_cast.sv /home/roland/mase/src/mase_components/cast/rtl/signed_clamp.sv /home/roland/mase/src/mase_components/cast/rtl/floor_round.sv /home/roland/mase/src/mase_components/memory/rtl/blk_mem_gen_0.sv /home/roland/mase/src/mase_components/memory/rtl/simple_dual_port_ram.sv --top top' --

1. Executing SLANG frontend.
Top level design units:
    top

../.mase/top/hardware/rtl/top.sv:182:1: error: unknown module 'net_0_bias_source'
net_0_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:264:1: error: unknown module 'net_2_weight_source'
net_2_weight_source #(
^~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:278:1: error: unknown module 'net_2_bias_source'
net_2_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:43:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:45:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:84:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_TOTAL_DIM0 must equal B_TOTAL_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:86:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_COMPUTE_DIM0 must equal B_COMPUTE_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:90:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:92:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:94:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:96:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:64:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:66:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_FRAC_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_FRAC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Build failed: 3 errors, 10 warnings
ERROR: Compilation failed

Those three missing modules (net_0_bias_source, net_2_weight_source and net_2_bias_source) are required by the top module but not generated by the LLM2FPGA.py. More research is needed to fix those.
**** DONE Mase
CLOSED: [2025-11-03 Mon 12:02]
- State "DONE"       from "TODO_NEXT"  [2025-11-03 Mon 12:02]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:39]
***** TODO_NEXT Figure out how the ~/.mase/top/hardware/rtl/*.sv files were created
- State "TODO_NEXT"  from              [2025-10-20 Mon 21:50]
  
***** CANCELED Elaborate SystemVerilog with yosys-slang
CLOSED: [2025-10-20 Mon 21:50]
- State "CANCELED"   from "TODO_NEXT"  [2025-10-20 Mon 21:50]
- State "TODO_NEXT"  from              [2025-08-19 Tue 13:39]
****** CANCELED Process BERT
CLOSED: [2025-10-20 Mon 21:50]
- State "CANCELED"   from "TODO_NEXT"  [2025-10-20 Mon 21:50]
- State "TODO_NEXT"  from              [2025-08-21 Thu 12:58]
  docs/tutorials/emit_verilog_bert.ipynb

  after jupyter nbconvert --to script docs/tutorials/emit_verilog_bert.ipynb, we can execute the python script:

  python docs/tutorials/emit_verilog_bert.py
******* TODO_NEXT Fix all errors
- State "TODO_NEXT"  from              [2025-08-21 Thu 13:22]
******** TODO_NEXT ModuleNotFoundError: No module named 'chop.models.patched'
- State "TODO_NEXT"  from              [2025-08-21 Thu 13:22]
****** DONE Create yosys script
CLOSED: [2025-08-21 Thu 12:58]
- State "DONE"       from "TODO_NEXT"  [2025-08-21 Thu 12:58]
- State "TODO_NEXT"  from              [2025-08-19 Tue 13:39]
Emitted SystemVerilog files:
   /home/roland/.mase/top/hardware/rtl/fixed_accumulator.sv
   /home/roland/.mase/top/hardware/rtl/fixed_adder_tree.sv
   /home/roland/.mase/top/hardware/rtl/fixed_adder_tree_layer.sv
   /home/roland/.mase/top/hardware/rtl/fixed_cast.sv
   /home/roland/.mase/top/hardware/rtl/fixed_dot_product.sv
   /home/roland/.mase/top/hardware/rtl/fixed_linear.sv
   /home/roland/.mase/top/hardware/rtl/fixed_mult.sv
   /home/roland/.mase/top/hardware/rtl/fixed_relu.sv
   /home/roland/.mase/top/hardware/rtl/fixed_vector_mult.sv
   /home/roland/.mase/top/hardware/rtl/join2.sv
   /home/roland/.mase/top/hardware/rtl/matmul.sv
   /home/roland/.mase/top/hardware/rtl/matrix_accumulator.sv
   /home/roland/.mase/top/hardware/rtl/matrix_fifo.sv
   /home/roland/.mase/top/hardware/rtl/matrix_flatten.sv
   /home/roland/.mase/top/hardware/rtl/matrix_stream_transpose.sv
   /home/roland/.mase/top/hardware/rtl/matrix_unflatten.sv
   /home/roland/.mase/top/hardware/rtl/register_slice.sv
   /home/roland/.mase/top/hardware/rtl/simple_matmul.sv
   /home/roland/.mase/top/hardware/rtl/skid_buffer.sv
   /home/roland/.mase/top/hardware/rtl/top.sv
   /home/roland/.mase/top/hardware/rtl/transpose.sv
   /home/roland/.mase/top/hardware/rtl/unpacked_repeat_circular_buffer.sv
******* CANCELED Fix unknown module errors [12/16]
CLOSED: [2025-08-21 Thu 12:57]
- State "CANCELED"   from "TODO_NEXT"  [2025-08-21 Thu 12:57]
- State "TODO_NEXT"  from              [2025-08-20 Wed 13:58]
  Better to use existing workflow from mase.
******** logs
yosys -m build/slang.so llm2fpga.ys

 /----------------------------------------------------------------------------\
 | yosys -- Yosys Open SYnthesis Suite                                |
 | Copyright (C) 2012 - 2024  Claire Xenia Wolf <claire@yosyshq.com>  |
 | Distributed under an ISC-like license, type "license" to see terms |
 \----------------------------------------------------------------------------/
 Yosys 0.45+126 (git sha1 80119386c, g++ 11.4.0-1ubuntu1~22.04 -Og -fPIC)

-- Executing script file `llm2fpga.ys' --

1. Executing VERIFIC (loading SystemVerilog and VHDL designs using Verific).
Built with Verific Aug24_SW_Release, released at Thu Aug 29 19:14:57 2024.

2. Executing SLANG frontend.
Top level design units:
    top

../.mase/top/hardware/rtl/top.sv:168:1: error: unknown module 'net_0_weight_source'
net_0_weight_source #(
^~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:182:1: error: unknown module 'net_0_bias_source'
net_0_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:264:1: error: unknown module 'net_2_weight_source'
net_2_weight_source #(
^~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/top.sv:278:1: error: unknown module 'net_2_bias_source'
net_2_bias_source #(
^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/fixed_vector_mult.sv:56:3: error: unknown module 'join2'
  join2 #() join_inst (
  ^~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:43:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:45:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:115:5: error: unknown module 'fifo'
    fifo #(
    ^~~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:142:7: error: unknown module 'mux'
      mux #(
      ^~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:166:7: error: unknown module 'mux'
      mux #(
      ^~~
../.mase/top/hardware/rtl/matrix_stream_transpose.sv:174:7: error: unknown module 'mux'
      mux #(
      ^~~
../.mase/top/hardware/rtl/matmul.sv:84:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_TOTAL_DIM0 must equal B_TOTAL_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:86:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_COMPUTE_DIM0 must equal B_COMPUTE_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:90:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:92:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("A_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:94:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:96:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
    else $fatal("B_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  in instance: top.net_0_inst.matmul_i
../.mase/top/hardware/rtl/matmul.sv:181:7: error: unknown module 'single_element_repeat'
      single_element_repeat #(
      ^~~~~~~~~~~~~~~~~~~~~
  in instance: top.net_2_inst.matmul_i
../.mase/top/hardware/rtl/matmul.sv:208:7: error: unknown module 'unpacked_skid_buffer'
      unpacked_skid_buffer #(
      ^~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/matmul.sv:314:5: error: unknown module 'fixed_signed_cast'
    fixed_signed_cast #(
    ^~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/fixed_linear.sv:179:5: error: unknown module 'join2'
    join2 join2_matmul_bias_i (
    ^~~~~
../.mase/top/hardware/rtl/fixed_linear.sv:186:5: error: unknown module 'input_buffer'
    input_buffer #(
    ^~~~~~~~~~~~
../.mase/top/hardware/rtl/fixed_linear.sv:205:5: error: unknown module 'fixed_rounding'
    fixed_rounding #(
    ^~~~~~~~~~~~~~
../.mase/top/hardware/rtl/fixed_linear.sv:215:5: error: unknown module 'unpacked_register_slice'
    unpacked_register_slice #(
    ^~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/fixed_linear.sv:248:5: error: unknown module 'fixed_cast'
    fixed_cast #(
    ^~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:64:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:66:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
      else $fatal("OUT_FRAC_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_FRAC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:91:3: error: unknown module 'join2'
  join2 sync_handshake (
  ^~~~~
../.mase/top/hardware/rtl/simple_matmul.sv:136:9: error: unknown module 'fixed_round'
        fixed_round #(
        ^~~~~~~~~~~

Build failed: 19 errors, 10 warnings
ERROR: Compilation failed
******** Notes
sv files are also located in /home/roland/mase/src/mase_components/
******** TODO_NEXT ../.mase/top/hardware/rtl/top.sv:168:1: error: unknown module 'net_0_weight_source'
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
net_0_weight_source #(
^~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/top.sv:182:1: error: unknown module 'net_0_bias_source'
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
net_0_bias_source #(
^~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/top.sv:264:1: error: unknown module 'net_2_weight_source'
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
net_2_weight_source #(
^~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/top.sv:278:1: error: unknown module 'net_2_bias_source'
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
net_2_bias_source #(
^~~~~~~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:115:5: error: unknown module 'fifo'
CLOSED: [2025-08-20 Wed 18:58]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:58]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    fifo #(
    ^~~~
******** DONE ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:142:7: error: unknown module 'mux'
CLOSED: [2025-08-20 Wed 18:50]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:50]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
      mux #(
      ^~~
******** DONE ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:166:7: error: unknown module 'mux'
CLOSED: [2025-08-20 Wed 18:50]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:50]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
      mux #(
      ^~~
******** DONE ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:174:7: error: unknown module 'mux'
CLOSED: [2025-08-20 Wed 18:51]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:51]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
      mux #(
      ^~~
******** DONE ../.mase/top/hardware/rtl/matmul.sv:181:7: error: unknown module 'single_element_repeat'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
      single_element_repeat #(
      ^~~~~~~~~~~~~~~~~~~~~
  in instance: top.net_2_inst.matmul_i
******** DONE ../.mase/top/hardware/rtl/matmul.sv:208:7: error: unknown module 'unpacked_skid_buffer'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
      unpacked_skid_buffer #(
      ^~~~~~~~~~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/matmul.sv:314:5: error: unknown module 'fixed_signed_cast'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
    fixed_signed_cast #(
    ^~~~~~~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/fixed_linear.sv:186:5: error: unknown module 'input_buffer'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
    input_buffer #(
    ^~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/fixed_linear.sv:205:5: error: unknown module 'fixed_rounding'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
    fixed_rounding #(
    ^~~~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/fixed_linear.sv:215:5: error: unknown module 'unpacked_register_slice'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
    unpacked_register_slice #(
    ^~~~~~~~~~~~~~~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/fixed_linear.sv:248:5: error: unknown module 'fixed_cast'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
    fixed_cast #(
    ^~~~~~~~~~
******** DONE ../.mase/top/hardware/rtl/simple_matmul.sv:136:9: error: unknown module 'fixed_round'
CLOSED: [2025-08-20 Wed 18:59]
- State "DONE"       from "TODO_NEXT"  [2025-08-20 Wed 18:59]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
******* CANCELED Fix warnings? [0/10]
CLOSED: [2025-08-21 Thu 12:56]
- State "CANCELED"   from "TODO_NEXT"  [2025-08-21 Thu 12:56]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:59]
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:84:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("A_TOTAL_DIM0 must equal B_TOTAL_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:86:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("A_COMPUTE_DIM0 must equal B_COMPUTE_DIM1!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:90:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("A_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:92:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("A_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:94:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("B_DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matmul.sv:96:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("B_DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  in instance: top.net_0_inst.matmul_i

******** TODO_NEXT ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:43:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("DIM0 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/matrix_stream_transpose.sv:45:17: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:45]
    else $fatal("DIM1 compute is not divisible!");
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

******** TODO_NEXT ../.mase/top/hardware/rtl/simple_matmul.sv:64:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
      else $fatal("OUT_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
******** TODO_NEXT ../.mase/top/hardware/rtl/simple_matmul.sv:66:19: warning: finish argument must have value of 0, 1, or 2 [-Wfinish-num]
- State "TODO_NEXT"  from              [2025-08-20 Wed 18:46]
      else $fatal("OUT_FRAC_WIDTH must be %d if OUTPUT_ROUNDING == 0", ACC_FRAC_WIDTH);
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
****** DONE Build yosys-slang
- State "DONE"       from              [2025-08-20 Wed 13:10]
  from yosys-slang dir, available with yosys -m build/slang.so
***** DONE Mase: call emit_verilog function
CLOSED: [2025-08-19 Tue 13:39]
- State "DONE"       from "TODO_NEXT"  [2025-08-19 Tue 13:39]
- State "TODO_NEXT"  from              [2025-08-10 Sun 14:18]
  Steps:
  nix develop
  source .venv/bin/activate
  
****** notes
even though the function is called emit_verilog_top_transform_pass, it emits SystemVerilog, not Verilog
****** CANCELED Setup flake.nix
CLOSED: [2025-08-13 Wed 13:08]
- State "CANCELED"   from "TODO_NEXT"  [2025-08-13 Wed 13:08]
- State "TODO_NEXT"  from              [2025-08-10 Sun 14:28]
  Let's do it later, just emit_verilog
******* CANCELED nix: /nix/store/whypqfa83z4bsn43n4byvmw80n4mg3r8-glibc-2.37-45/lib/libc.so.6: version `GLIBC_2.38' not found (required by /nix/store/90yn7340r8yab8kxpb0p7y0c9j3snjam-gcc-13.2.0-lib/lib/libstdc++.so.6)
CLOSED: [2025-08-13 Wed 13:08]
- State "CANCELED"   from "TODO_NEXT"  [2025-08-13 Wed 13:08]
- State "TODO_NEXT"  from              [2025-08-10 Sun 14:28]
nix develop

****** Notes
The most useful tutorial for LLM2FPGA is not written
https://deepwok.github.io/mase/modules/documentation/tutorials/tutorial_8_emit_verilog.html
** DONE Table with github metrics for each project
CLOSED: [2025-11-23 Sun 15:07]
- State "DONE"       from "TODO_NEXT"  [2025-11-23 Sun 15:07]
- State "TODO_NEXT"  from              [2025-11-12 Wed 12:59]
** HLS notes

Look for alternatives to Vitis HLS, open source, able to process Vitis HLS headers like #include <ap_int.h> #include <hls_stream.h>


https://chatgpt.com/share/6908e06c-1b24-8008-b02c-3313dc555d0b

Very promissing:
https://github.com/ferrandi/PandA-bambu
* DONE subtask 1.a
CLOSED: [2025-11-03 Mon 12:08]
- State "DONE"       from              [2025-11-03 Mon 12:08]
** DONE Quick AI analysis of all papers to find snags [0/13]
CLOSED: [2025-08-10 Sun 14:17]
- State "DONE"       from "TODO_NEXT"  [2025-08-10 Sun 14:17]
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:22]
*** TODO_NEXT TeLLMe (https://arxiv.org/abs/2504.16266)          
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT https://arxiv.org/abs/2503.16731                   
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT TerEffic https://arxiv.org/abs/2502.16473          
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT MEADOW https://arxiv.org/abs/2503.11663            
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT FlightLLM https://arxiv.org/abs/2401.03868         
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT SECDA-LLM https://arxiv.org/abs/2408.00462         
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT MatMul-Free LM https://arxiv.org/abs/2406.02528    
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT LoopLynx https://arxiv.org/abs/2504.09561          
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT On-Device Qwen2.5 https://arxiv.org/abs/2504.17376 
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT HLSTransform https://arxiv.org/abs/2405.00738      
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT https://arxiv.org/abs/2312.15159                   
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT AccLLM https://arxiv.org/abs/2505.03745            
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
*** TODO_NEXT MASE https://arxiv.org/abs/2307.15517v2            
- State "TODO_NEXT"  from              [2025-07-02 Wed 12:25]
** DONE Create links to all papers analyzed
CLOSED: [2025-07-02 Wed 12:21]
- State "DONE"       from "TODO_NEXT"  [2025-07-02 Wed 12:21]
- State "TODO_NEXT"  from              [2025-06-30 Mon 21:13]

